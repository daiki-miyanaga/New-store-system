店舗向け 新システム GUI モックアップ仕様書（ドラフト v0.9）

作成日: 2025-08-16
対象: 宮永担当店用エクセルブック（ヒアリング・商品管理ドラフト）

0. 目的と前提

目的: 既存のエクセル運用（ヒアリング、洋生ノート、実績入力＆単日ノート、発注修正シミュ、指定期間調査）を踏まえ、画面モックアップを迅速に作成できるUI仕様を定義する。

開発環境: Windows

開発補助: Gemini（LLM）

利用ライブラリ（無料）: HTML/CSS、Tailwind CSS、Alpine.js、Chart.js

非機能: オフライン時の限定動作、操作ログ、CSV入出力

用語: 「洋生＝洋生菓子カテゴリ全般」

1. 画面一覧（Information Architecture）
画面ID	画面名	主な目的	主利用者	備考
LGN-001	ログイン＆接続	サインイン、VPN自動接続状態の確認/再接続	店舗担当/管理者	VPN接続プロセスの簡略化
DASH-001	ダッシュボード	当日KPI（客数/売上/在庫/完売/予算進捗）	店舗担当/管理者	主要導線
DAIRY-001	実績入力＆単日ノート	日次実績入力（前日残/入荷/移動/販売/ロス/在庫/特注/完売時間/時間帯別）	店舗担当	Excel「実績入力＆単日ノート」対応
ORDER-001	発注	バラ/ケース混在発注、制約・予算の可視化	店舗担当	ケース単位対応、制約表示
SIM-001	発注修正シミュレーター	参考日/前年比較でWhat-if調整（構成比・数量）	店舗担当	Excel「発注修正シミュ」対応
ANALY-001	指定期間調査	期間・カテゴリ・商品で集計（実績/構成比/特注/完売日数/前年気温）	店舗担当/管理者	Excel「指定期間調査」対応
NOTE-001	洋生ノート	指定期間抽出・分析、カテゴリ別確認、メモ	店舗担当	希望項目シート反映
MST-PRD	商品マスタ	商品C/商品名/単価/カテゴリ/ケース入数/発注単位/最小/倍数/仕入先	管理者	商品管理表ドラフト想定
MST-CUS	得意先マスタ	得意先C/名称/区分	管理者	
MST-ETC	イベント・気象	特招会/競合催事、天気/気温	管理者	
SET-LOG	操作ログ	監査・操作履歴	管理者	
2. 画面遷移（テキスト図）
[LGN-001]
   └→ [DASH-001]
          ├→ [DAIRY-001]（当日入力）
          ├→ [ORDER-001]（当日/翌日発注）
          │      └→ [SIM-001]（What-if/参考）
          ├→ [ANALY-001]（範囲分析）
          ├→ [NOTE-001]（洋生ノート）
          └→ [MST-PRD/MST-CUS/MST-ETC]（マスタ保守）

3. 画面詳細仕様
LGN-001 ログイン＆接続

フォーム: ユーザID/パスワード（最小8文字、5回失敗でロック）

接続カード: VPN自動接続トグル、状態（接続/再接続中/失敗）、再試行

その他: 直近同期時刻表示、エラートースト

DASH-001 ダッシュボード

KPIカード: 客数、売上、在庫合計、完売件数、予算進捗（当日発注額の予算比）

本日アラート: 制約違反の発注、完売時間記録漏れ、ロス異常値

チャート: 時間帯別売上（棒）、カテゴリ構成比（円）

DAIRY-001 実績入力＆単日ノート

入力グリッド（主要列）

日付、商品C、商品名、単価、カテゴリ

前日残、入荷実績、移動、販売数、ロス数

当日在庫（自動） = 前日残 + 入荷実績 + 移動 − 販売数 − ロス数

閉店時在庫（任意入力/自動推奨）

特注（数値/メモ）、完売時間（HH:MM）

サブパネル: 時間帯別売上（行追加：時間・売上）／合計・構成比（自動）

操作: 行追加/複製/削除、インライン編集、オートフィル、フィルタ（カテゴリ/商品名）

バリデーション: ロス比率の異常値、完売時間の範囲（00:00–23:59）

出力: CSV、印刷レイアウト

ORDER-001 発注

ヘッダ: 日付、得意先C、予算（千円）

商品リスト列

商品名、単価、カテゴリ、ケース入数、発注単位（バラ/ケース）、最小発注数、発注倍数、在庫、売上見込

入力: バラ数量／ケース数量（相互連動）

制約バッジ: 最小/倍数/ケース入数違反を赤表示（理由ツールチップ）

集計: 合計金額、カテゴリ発注構成比、予算進捗バー

アシスト: 推奨数量（過去実績×イベント補正×気温補正の簡易式）

連携: 「シミュへ」→ SIM-001

SIM-001 発注修正シミュレーター

参照: 参考日付、前年日付、商品C/商品名/カテゴリ、前年実績、構成比、発注構成比

操作: スライダー/数値入力で構成比・数量を調整→ 合計金額・構成比リアルタイム更新

制御: 「予算=60千円」等のしきい値カード表示

反映: 「確定」で ORDER-001 に戻し適用

ANALY-001 指定期間調査

フィルタ: 期間（自/至）、商品C/カテゴリ/得意先、特注有無、完売日数しきい値

出力列: 実績、構成比、特注、完売日数、前年気温

操作: 列ソート、CSV出力、カテゴリ別ピボット

NOTE-001 洋生ノート

パネル構成

基本: 日付/得意先C/商品C、商品名/単価/カテゴリ

在庫: 前日残、入荷実績、販売数、ロス数、当日在庫、閉店時在庫

付帯: 特注、客単価、完売時間、天気、気温、メモ、時間帯別売上

レイアウト: 3カラム（基本/在庫/付帯）＋ 右に時間帯別売上テーブル

MST-PRD 商品マスタ

フィールド: 商品C（PK）、商品名、単価、カテゴリ、ケース入数、発注単位、最小発注数、発注倍数、仕入先、状態（販売中/休止）

操作: 検索、行内編集、CSVインポート/エクスポート

4. UIコンポーネント定義

テーブル: 固定ヘッダ、横スクロール、列リサイズ

数値入力: 最小=0、整数/小数切替

時刻入力: HH:MM（24h）

トグル/バッジ: 制約・接続状態表示

進捗バー: 予算比率

チャート: 構成比（円）、時間帯売上（棒）

ダイアログ: 確定/取消、エラー詳細

5. バリデーション & ビジネスルール

在庫計算

当日在庫 = 前日残 + 入荷実績 + 移動 − 販売数 − ロス数


完売時間: 00:00–23:59。未発生は空（NULL）

予算: 合計金額 ≤ 予算（千円→円換算）

構成比: カテゴリ合計 100%（±0.1%許容）

発注制約

数量 ≥ 最小発注数

数量 は 発注倍数の整数倍

ケース時は バラ数量 = ケース数量 × ケース入数

ケース入力時、バラ数量 % ケース入数 = 0

6. データモデル（簡易）

products
(product_code, name, price, category, case_qty, order_unit, min_qty, step_qty, supplier, status)

daily_records
(date, product_code, prev_stock, inbound, transfer, sold, loss, stock_today, stock_close, special_order, soldout_time, hourly_sales_json, sales_amount, share)

orders
(order_id, date, customer_code, product_code, qty_piece, qty_case, amount, budget_id, violated)

order_constraints
(product_code, min_qty, step_qty, case_qty, order_unit)

customers
(customer_code, name, segment)

events_weather
(date, special_sale, competitor_event, weather, temperature)

users
(user_id, role, login_history)

audit_logs
(timestamp, user_id, action, screen_id, payload_summary)

7. 権限・ロール

店舗担当: 実績入力/発注/シミュ/調査の閲覧・編集

管理者: すべて＋マスタ編集＋ログ閲覧

8. 例外・アラート設計

制約違反: 赤バッジ＋理由ツールチップ

過大ロス: 当日ロス比 > しきい値で警告

完売時間未入力: 行アイコンで注意喚起

接続失敗/VPN未接続: トースト＋再接続CTA

9. プロトタイピング方針（Gemini補助）

技術: HTML + Tailwind CSS + Alpine.js + Chart.js（無料）

優先度: DAIRY-001 / ORDER-001 / SIM-001 を先行

テストデータ: 既存ExcelをCSV化

Gemini プロンプト例

「Tailwind のレスポンシブ表で、固定ヘッダ・横スクロール・列リサイズ可能な商品テーブル（商品名/単価/カテゴリ/前日残/入荷/販売/ロス/在庫/完売時間/特注）を作る。バリデーションのコメントもHTMLに入れて。」

「発注画面の数量入力（バラ/ケース）を相互連動。ケース入数、最小、倍数の制約に違反すると赤バッジ表示。予算進捗バーも。」

「参考日と前年比較の発注シミュレーター。構成比スライダーを動かすと合計金額と円グラフが更新されるUI。」

10. 画面ワイヤ（テキスト）

ORDER-001（発注）

┌ 発注 [日付: □□] [得意先C: □□] [予算(千円): 60 ]  [ SIMへ ]
├ 合計金額: ¥■■■ / 予算進捗 [██████░░░░] 75%
├ フィルタ: [カテゴリ▼] [検索🔍]
├─────────────────────────────────────
│ 商品名     | 単価 | カテ | ケース入数 | 単位 | 最小 | 倍数 | 在庫 | 予測 |  バラ数量  | ケース数量 | 制約
│ カスタード | 350  |ﾌﾟﾘﾝ|   12     | ﾊﾞﾗ |  12 |  6  |  8  |  20 | [   6 ]   | [  1  ]  |  ⚠倍数外
│ ﾚｱﾁｰｽﾞ    |1200  |ｹｰｷ|    6     |ｹｰｽ |   1 |  1  |  2  |  10 | [   0 ]   | [  1  ]  |  OK
└─────────────────────────────────────


DAIRY-001（単日ノート）

┌ 単日ノート [日付: 2025/08/14] [客数: 60]
├ 合計売上: ¥■■■ / 構成比 円グラフ
├──────────────────────────────────────────
│ 商品C | 商品名        | 単価 | カテゴリ | 前日残 | 入荷 | 移動 | 販売 | ロス | 当日在庫 | 閉店在庫 | 特注 | 完売時間 |
│ xxxx  | ｵﾚﾝｼﾞ&ﾏﾝｺﾞｰ  | 270  | ｾﾞﾘｰ   |   3   |  10 |  0  |  12 |  1  |   0    |    0    |  2   |  19:30   |
└──────────────────────────────────────────
  時間帯別売上: [+行追加]  [時間] [売上]  合計: ¥■■■

11. 入出力（CSV）

インポート: products, customers, daily_records（追記/上書き）

エクスポート: 画面グリッドのフィルタ結果のみをCSV出力（UTF-8 / CRLF）